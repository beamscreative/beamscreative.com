!function(){"use strict";document.addEventListener("DOMContentLoaded",()=>{console.log("[DEBUG] DOMContentLoaded fired - works.js initializing");try{(()=>{console.log("[DEBUG] initWorkMobileHorizontalScroll called");const e=window.matchMedia("(max-width: 767px)").matches;if(console.log("[DEBUG] isMobile:",e),!e)return;const t=document.querySelector(".project-list")||document.querySelector(".works-wrapper .project-list")||document.querySelector('.works-wrapper [role="list"]');if(!t)return;const o=Array.from(t.querySelectorAll(".project-item"));if(!o.length)return;let n=!1,r=null,l=null;const i=()=>{const e=t.scrollLeft+t.clientWidth/2;let n=o[0],r=1/0;return o.forEach(t=>{const o=t.offsetLeft+t.offsetWidth/2,l=Math.abs(o-e);l<r&&(n=t,r=l)}),n},s=e=>{o.forEach(t=>t.classList.toggle("is-active",t===e))},c=()=>{const e=i();if(!e)return;const o=e.offsetLeft-(t.clientWidth-e.offsetWidth)/2;t.scrollTo({left:Math.max(0,o),behavior:"smooth"}),s(e)};s(o[0]),t.addEventListener("scroll",()=>{l||(l=requestAnimationFrame(()=>{l=null;const e=i();e&&s(e)}),clearTimeout(r),r=setTimeout(()=>{n||c()},120))},{passive:!0}),t.addEventListener("touchstart",()=>{n=!0,clearTimeout(r)},{passive:!0}),t.addEventListener("touchend",()=>{n=!1,c()},{passive:!0}),t.addEventListener("touchcancel",()=>{n=!1,c()},{passive:!0}),window.addEventListener("resize",()=>{clearTimeout(r),r=setTimeout(c,150)})})(),(()=>{console.log("[DEBUG] initWorkFilterNavigation called");const e=Array.from(document.querySelectorAll('a[href*="#"]')).filter(e=>{const t=e.getAttribute("href");return t&&t.startsWith("#")&&t.length>1});console.log("[DEBUG] Filter links found:",e.length,e.map(e=>e.getAttribute("href"))),e.length&&e.forEach(t=>{t.addEventListener("click",o=>{const n=t.getAttribute("href");if(!n||!n.startsWith("#"))return;const r=n.substring(1),l=document.getElementById(r);console.log("[DEBUG] Filter link clicked:",n,"Target found:",!!l),l&&(o.preventDefault(),e.forEach(e=>e.classList.remove("w--current")),t.classList.add("w--current"),l.scrollIntoView({behavior:"smooth",block:"start"}))})})})(),(()=>{console.log("[DEBUG] initWorkNavigationDots called");const e=Array.from(document.querySelectorAll(".nav-line .nav-dot"));if(console.log("[DEBUG] Nav dots found:",e.length),!e.length)return void console.log("[DEBUG] No nav dots found, exiting");const t=Array.from(document.querySelectorAll(".project-item, .works-item, [data-nav-section]"));if(console.log("[DEBUG] Project items found:",t.length),!t.length)return void console.log("[DEBUG] No project items found, exiting");const o=Math.min(e.length,t.length),n=e.slice(0,o),r=t.slice(0,o);let l=!1;const i=()=>{const e=window.scrollY+window.innerHeight/2;let t=0;for(let o=0;o<r.length;o++){const n=r[o].getBoundingClientRect(),l=n.top+window.scrollY,i=l+n.height;if(e>=l&&e<i){t=o;break}}console.log("[DEBUG] updateActiveDot - scrollPos:",e,"activeIndex:",t,"totalItems:",r.length),n.forEach((e,o)=>{o===t?e.classList.add("is-active"):e.classList.remove("is-active")}),l=!1};n.forEach((e,t)=>{e.addEventListener("click",e=>{e.preventDefault(),r[t]&&r[t].scrollIntoView({behavior:"smooth",block:"start"})})}),window.addEventListener("scroll",()=>{l||(window.requestAnimationFrame(i),l=!0)},{passive:!0}),i()})(),console.log("[DEBUG] All init functions completed successfully")}catch(e){console.error("[DEBUG] Error in init functions:",e.message,e.stack)}})}();
